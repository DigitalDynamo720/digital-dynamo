<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Digital Dynamo</title>
<style>
  body { font-family: Arial, sans-serif; background: #fff; color: #000; padding: 20px; }
  header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
  button { margin: 0 5px; padding: 5px 10px; }
  .course, .bundle { border: 1px solid #ddd; padding: 15px; margin-bottom: 10px; border-radius: 5px; }
  .cart { border: 1px solid #aaa; padding: 15px; max-width: 300px; }
  .rating { color: gold; }
</style>
</head>
<body>

<header>
  <h1 id="title">Digital Dynamo</h1>
  <div>
    <button onclick="setLanguage('en')">English</button>
    <button onclick="setLanguage('es')">Español</button>
  </div>
</header>

<section>
  <h2 id="courses-title">Courses</h2>
  <div id="courses-container"></div>
</section>

<section>
  <h2 id="bundles-title">Course Bundles</h2>
  <div id="bundles-container"></div>
</section>

<section>
  <h2 id="cart-title">Shopping Cart</h2>
  <div id="cart-container">No items in cart.</div>
  <button onclick="checkout()">Checkout</button>
</section>

<script>
  // Multi-language texts
  const texts = {
    en: {
      title: "Digital Dynamo",
      coursesTitle: "Courses",
      bundlesTitle: "Course Bundles",
      cartTitle: "Shopping Cart",
      noCartItems: "No items in cart.",
      checkout: "Checkout",
      addToCart: "Add to Cart",
      price: "Price",
      rating: "Rating",
      courseIncludes: "Includes courses:",
      total: "Total",
      paymentPlaceholder: "Payment processing placeholder"
    },
    es: {
      title: "Dínamo Digital",
      coursesTitle: "Cursos",
      bundlesTitle: "Paquetes de Cursos",
      cartTitle: "Carrito de Compras",
      noCartItems: "No hay artículos en el carrito.",
      checkout: "Pagar",
      addToCart: "Añadir al Carrito",
      price: "Precio",
      rating: "Calificación",
      courseIncludes: "Incluye cursos:",
      total: "Total",
      paymentPlaceholder: "Marcador de posición para pago"
    }
  };

  // Sample courses with multi-language titles and descriptions, ratings
  const courses = [
    {
      id: 1,
      title: { en: "Learn JavaScript", es: "Aprender JavaScript" },
      description: { en: "JS basics and advanced", es: "Básicos y avanzados de JS" },
      price: 100,
      rating: 4.5,
    },
    {
      id: 2,
      title: { en: "React for Beginners", es: "React para Principiantes" },
      description: { en: "Build React apps", es: "Construye apps con React" },
      price: 120,
      rating: 4.7,
    },
    {
      id: 3,
      title: { en: "Python Fundamentals", es: "Fundamentos de Python" },
      description: { en: "Learn Python programming", es: "Aprende programación en Python" },
      price: 90,
      rating: 4.3,
    }
  ];

  // Sample bundles (group courses by IDs), with discounted prices
  const bundles = [
    {
      id: 101,
      title: { en: "Web Developer Pack", es: "Paquete Desarrollador Web" },
      coursesIncluded: [1, 2],
      price: 190, // discounted (instead of 220)
    },
    {
      id: 102,
      title: { en: "Full Stack Pack", es: "Paquete Full Stack" },
      coursesIncluded: [1, 2, 3],
      price: 270, // discounted (instead of 310)
    }
  ];

  let currentLang = 'en';
  let cart = [];

  // Utility to render stars for rating (rounded half stars)
  function renderRating(rating) {
    const fullStars = Math.floor(rating);
    const halfStar = rating % 1 >= 0.5;
    let stars = '★'.repeat(fullStars);
    if (halfStar) stars += '½';
    stars += '☆'.repeat(5 - fullStars - (halfStar ? 1 : 0));
    return stars;
  }

  function setLanguage(lang) {
    currentLang = lang;
    renderUI();
  }

  function renderCourses() {
    const container = document.getElementById('courses-container');
    container.innerHTML = '';
    courses.forEach(course => {
      const div = document.createElement('div');
      div.className = 'course';
      div.innerHTML = `
        <h3>${course.title[currentLang]}</h3>
        <p>${course.description[currentLang]}</p>
        <p><strong>${texts[currentLang].price}:</strong> $${course.price}</p>
        <p><strong>${texts[currentLang].rating}:</strong> <span class="rating">${renderRating(course.rating)}</span></p>
        <button onclick="addToCart('course', ${course.id})">${texts[currentLang].addToCart}</button>
      `;
      container.appendChild(div);
    });
  }

  function renderBundles() {
    const container = document.getElementById('bundles-container');
    container.innerHTML = '';
    bundles.forEach(bundle => {
      const includedCourses = bundle.coursesIncluded.map(id => {
        const course = courses.find(c => c.id === id);
        return course ? course.title[currentLang] : '';
      }).join(', ');

      const sumCoursesPrice = bundle.coursesIncluded.reduce((sum, id) => {
        const course = courses.find(c => c.id === id);
        return sum + (course ? course.price : 0);
      }, 0);

      const div = document.createElement('div');
      div.className = 'bundle';
      div.innerHTML = `
        <h3>${bundle.title[currentLang]}</h3>
        <p><strong>${texts[currentLang].courseIncludes}</strong> ${includedCourses}</p>
        <p><strong>${texts[currentLang].price}:</strong> <del>$${sumCoursesPrice}</del> <strong>$${bundle.price}</strong></p>
        <button onclick="addToCart('bundle', ${bundle.id})">${texts[currentLang].addToCart}</button>
      `;
      container.appendChild(div);
    });
  }

  function addToCart(type, id) {
    cart.push({ type, id });
    renderCart();
  }

  function renderCart() {
    const container = document.getElementById('cart-container');
    if (cart.length === 0) {
      container.innerText = texts[currentLang].noCartItems;
      return;
    }
    container.innerHTML = '';
    let totalPrice = 0;

    cart.forEach((item, index) => {
      let name = '';
      let price = 0;
      if (item.type === 'course') {
        const course = courses.find(c => c.id === item.id);
        if (course) {
          name = course.title[currentLang];
          price = course.price;
        }
      } else if (item.type === 'bundle') {
        const bundle = bundles.find(b => b.id === item.id);
        if (bundle) {
          name = bundle.title[currentLang];
          price = bundle.price;
        }
      }
      totalPrice += price;
      const div = document.createElement('div');
      div.innerHTML = `${name} - $${price} <button onclick="removeFromCart(${index})">X</button>`;
      container.appendChild(div);
    });

    const totalDiv = document.createElement('div');
    totalDiv.style.fontWeight = 'bold';
    totalDiv.style.marginTop = '10px';
    totalDiv.innerText = `${texts[currentLang].total}: $${totalPrice.toFixed(2)}`;
    container.appendChild(totalDiv);
  }

  function removeFromCart(index) {
    cart.splice(index, 1);
    renderCart();
  }

  function checkout() {
    if (cart.length === 0) {
      alert('Cart is empty!');
      return;
    }
    alert(texts[currentLang].paymentPlaceholder + '\n(This is a placeholder. Integrate real payment here.)');
    // After payment success:
    cart = [];
    renderCart();
  }

  function renderUI() {
    document.getElementById('title').innerText = texts[currentLang].title;
    document.getElementById('courses-title').innerText = texts[currentLang].coursesTitle;
    document.getElementById('bundles-title').innerText = texts[currentLang].bundlesTitle;
    document.getElementById('cart-title').innerText = texts[currentLang].cartTitle;
    renderCourses();
    renderBundles();
    renderCart();
  }

  // Initial render
  renderUI();
</script>

</body>
</html>
